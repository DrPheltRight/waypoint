// Waypoint: Browser Edition v0.2.5
// Written by Luke Morton, MIT licensed.
// https://github.com/DrPheltRight/waypoint
!function(a){typeof define=="function"&&define.amd?define(a):this.waypoint=a()}(function(){function a(b){return a[b]}return a["./route"]=new function(){var a=this;((function(){var b;b=function(){function c(a,c,d){d==null&&(d=c,c=a,a="GET"),c instanceof RegExp||(this.regex=b(c,{})),this.method=a.toUpperCase(),d!=null&&(this.callback=d)}var a,b;return a=function(a,b,c){var d,e,f;c=a;for(e=0,f=b.length;e<f;e++){d=b[e];if(b.hasOwnProperty(d)){c=b[d](a);if(c!==a)break}}return c===a?"([a-zA-Z0-9-]+)":c},b=function(b,c){var d,e,f,g;b.indexOf(!0)&&(b=b.replace(/\*/g,"([_.()!\\ %@&a-zA-Z0-9-]+)")),e=b.match(/:([^\/]+)/ig);if(e)for(f=0,g=e.length;f<g;f++)d=e[f],b=b.replace(d,a(d,c));return new RegExp("^"+b+"$")},c.prototype.match=function(a,b){var c;return b==null&&(b=a,a=null),a!=null&&this.method!==a.toUpperCase()?!1:(c=this.regex.exec(b),c&&c.length!=null?c.slice(1):!1)},c}(),a.Route=b})).call(this)},a["./router"]=new function(){var b=this;((function(){var c,d;c=a("./route").Route,Array.isArray||(Array.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"}),d=function(){function b(a){var b,c,d,e,f;if(a){f=["routes","baseUri","notFound"];for(d=0,e=f.length;d<e;d++)b=f[d],a[b]!=null&&(this[b]=a[b]);a.routeMap!=null&&(c=a.routeMap)}this.routes||(this.routes=[]),c!=null&&this.routeMap(c),this.baseUri||(this.baseUri="")}var a;return b.prototype.route=function(a,b,d){var e;return a instanceof c?e=a:e=new c(a,b,d),this.routes.push(e)},b.prototype.get=function(a,b){return this.route("GET",a,b)},b.prototype.post=function(a,b){return this.route("POST",a,b)},a=function(a){var b,c,d;return b=a.match(/^(GET|POST) (.+)/),b&&b.length!=null?(d=b.slice(1,3).reverse(),a=d[0],c=d[1],c||(c="GET"),[a,c]):[a||"","GET"]},b.prototype.routeMap=function(b,c){var d,e,f,g,h;c==null&&(c=this.baseUri),h=[];for(f in b){d=b[f],g=a(f),f=g[0],e=g[1],f=c+f;if(typeof d=="function"||Array.isArray(d))h.push(this.route(e,f,d));else if(typeof d=="object")h.push(this.routeMap(d,f));else throw"Map must be string array or object"}return h},b.prototype.dispatch=function(a,b){var c,d,e,f,g,h,i,j,k;k=this.routes;for(g=0,i=k.length;g<i;g++){f=k[g],e=f.match(a,b);if(!e)continue;Array.isArray(f.callback)?d=f.callback:d=[f.callback];for(h=0,j=d.length;h<j;h++)c=d[h],c.apply(f,e);return!0}return this.notFound!=null&&this.notFound(),!1},b}(),b.Router=d})).call(this)},{Route:a("./route").Route,Router:a("./router").Router}})